# Roboflow API Key
# Get from https://app.roboflow.com/settings/api
ROBOFLOW_API_KEY=your_api_key_here

# AIS API Credentials
# Get from https://www.barentswatch.no/minside/devaccess/ais
# Documentation: https://developer.barentswatch.no/docs/appreg
AIS_CLIENT_ID=your_client_id_here
AIS_CLIENT_SECRET=your_client_secret_here

# S3 Storage (Optional, for development)
S3_ACCESS_KEY=your_access_key_here
S3_SECRET_KEY=your_secret_key_here 
S3_PUBLIC_BASE_URL=public_url
S3_PRESIGN_EXPIRES=900

# Streaming orchestrator
MAX_WORKERS=4
DEFAULT_STREAM_ID=default
# Keep a stream alive this many seconds after last heartbeat (0 disables heartbeat-idle stop).
STREAM_IDLE_TIMEOUT_SECONDS=300
# Stop worker when no active detections websocket viewers for this many seconds.
STREAM_NO_VIEWER_TIMEOUT_SECONDS=15
# If true, DEFAULT_STREAM_ID ignores no-viewer stop.
PROTECT_DEFAULT_STREAM=false
STREAM_READ_FPS_CAP=0
STREAM_DETECTION_QUEUE_SIZE=4

# MediaMTX / FFmpeg publishing
MEDIAMTX_ENABLED=true
MEDIAMTX_RTSP_BASE=rtsp://localhost:8554
MEDIAMTX_WHEP_BASE=http://localhost:8889
MEDIAMTX_HLS_BASE=http://localhost:8888
# Optional publish credentials for MediaMTX auth hook
MEDIAMTX_PUBLISH_USER=
MEDIAMTX_PUBLISH_PASS=
# Optional read credentials (not included in playback URLs unless explicitly enabled)
MEDIAMTX_READ_USER=
MEDIAMTX_READ_PASS=
MEDIAMTX_INCLUDE_READ_CREDENTIALS_IN_URLS=false

# FFmpeg encoder controls for RTSP publish
FFMPEG_BIN=ffmpeg
# libx264 (CPU), h264_videotoolbox (Apple Silicon/macOS), h264_nvenc (NVIDIA)
FFMPEG_CODEC=libx264
FFMPEG_LIBX264_PRESET=ultrafast
FFMPEG_NVENC_PRESET=p1
FFMPEG_VIDEO_BITRATE=4M
FFMPEG_GOP=30
# Optional downscale before encoding (0 disables scaling)
FFMPEG_SCALE_WIDTH=0
FFMPEG_SCALE_HEIGHT=0

# Optional extra frontend origins for CORS (comma-separated)
# Example: FRONTEND_ORIGINS=http://10.0.0.3:5173,http://10.0.0.4:5173
FRONTEND_ORIGINS=
# Redis pub/sub for detection streaming
REDIS_URL=redis://localhost:6379/0
REDIS_DETECTIONS_CHANNEL_PREFIX=detections
DEFAULT_DETECTIONS_STREAM_ID=default

MEDIAMTX_ENABLED=true
MEDIAMTX_RTSP_BASE=rtsp://localhost:8554
MEDIAMTX_WHEP_BASE=http://localhost:8889
MEDIAMTX_HLS_BASE=http://localhost:8888
